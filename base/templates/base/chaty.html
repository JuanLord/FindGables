{% load static %}

<html>
  <head>
    <title>Styled Map Types</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
    <meta name = "viewport" content = "width=device-width, initial-scale = 1.0">
    <link href = "{% static 'style.css' %}" rel = "stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat">
    
    <link rel = "stylesheet" href = "https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.1/css/fontawesome.min.css">

    <style>
        #map {
            margin-top: 40px;
            margin-bottom: 100px;
            align-items: center;
            height: 800px;
            width: 100%;
        }


        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
        #imageheader{
            background-image: linear-gradient(rgba(165, 130, 83, 0.596), rgba(130, 130, 130, 0.124)), url("https://a.cdn-hotels.com/gdcs/production143/d611/55d0779d-fe78-44cd-8e73-ed8091959399.jpg");
        }
    </style>
  </head>
  <body>
    <section class = "header" id="imageheader">
        <!--The navigation bar -->
        <nav>
            <div><img src="{% static 'Logo.png' %}" style="width:100px;"></div>
            <div class = "nav-links" id = "navLinks">
                <i class="fa fa-times" onclick="hideMenu()"></i>
                <ul>
                    <li><a href="index" class = "active">HOME</a>
                    <li><a href = "attractions">ATTRACTIONS</a></li>
                    <li><a href="map">MAP</a></li>
                    <li><a href="itinerary">ITINERARY</a></li>
                    <li><a href="about">ABOUT</a></li>
                </ul>
            </div>
            <i class="fa fa-bars" onclick="showMenu()"></i>
        </nav>
        <div class = "text-box">
            <h1>Welcome to Gables Map!</h1>
            <p>Explore the city with this map!</p>
        </div>
    </section>
    <div id="map"></div>
    
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAm5HV4oCL5p1vDzASWdBbzkxfP2p212wE&callback=initMap&v=weekly" defer></script>
    <script>
        function initMap() {

            
            // Map's Style JSON
            const styledMapType = new google.maps.StyledMapType(
                [
                    {
                        "elementType": "geometry",
                        "stylers": [
                        {
                            "color": "#ebe3cd"
                        }
                        ]
                    },
                    {
                        "elementType": "labels",
                        "stylers": [
                        {
                            "visibility": "off"
                        }
                        ]
                    },
                    {
                        "elementType": "labels.text.fill",
                        "stylers": [
                        {
                            "color": "#523735"
                        }
                        ]
                    },
                    {
                        "elementType": "labels.text.stroke",
                        "stylers": [
                        {
                            "color": "#f5f1e6"
                        }
                        ]
                    },
                    {
                        "featureType": "administrative",
                        "elementType": "geometry.stroke",
                        "stylers": [
                        {
                            "color": "#c9b2a6"
                        }
                        ]
                    },
                    {
                        "featureType": "administrative.land_parcel",
                        "stylers": [
                        {
                            "visibility": "off"
                        }
                        ]
                    },
                    {
                        "featureType": "administrative.land_parcel",
                        "elementType": "geometry.stroke",
                        "stylers": [
                        {
                            "color": "#dcd2be"
                        }
                        ]
                    },
                    {
                        "featureType": "administrative.land_parcel",
                        "elementType": "labels.text.fill",
                        "stylers": [
                        {
                            "color": "#ae9e90"
                        }
                        ]
                    },
                    {
                        "featureType": "administrative.neighborhood",
                        "stylers": [
                        {
                            "visibility": "off"
                        }
                        ]
                    },
                    {
                        "featureType": "landscape.natural",
                        "elementType": "geometry",
                        "stylers": [
                        {
                            "color": "#dfd2ae"
                        }
                        ]
                    },
                    {
                        "featureType": "poi",
                        "elementType": "geometry",
                        "stylers": [
                        {
                            "color": "#dfd2ae"
                        }
                        ]
                    },
                    {
                        "featureType": "poi",
                        "elementType": "labels.text.fill",
                        "stylers": [
                        {
                            "color": "#93817c"
                        }
                        ]
                    },
                    {
                        "featureType": "poi.business",
                        "stylers": [
                        {
                            "visibility": "off"
                        }
                        ]
                    },
                    {
                        "featureType": "poi.park",
                        "elementType": "geometry.fill",
                        "stylers": [
                        {
                            "color": "#a5b076"
                        }
                        ]
                    },
                    {
                        "featureType": "poi.park",
                        "elementType": "labels.text",
                        "stylers": [
                        {
                            "visibility": "off"
                        }
                        ]
                    },
                    {
                        "featureType": "poi.park",
                        "elementType": "labels.text.fill",
                        "stylers": [
                        {
                            "color": "#447530"
                        }
                        ]
                    },
                    {
                        "featureType": "road",
                        "elementType": "geometry",
                        "stylers": [
                        {
                            "color": "#f5f1e6"
                        }
                        ]
                    },
                    {
                        "featureType": "road.arterial",
                        "elementType": "geometry",
                        "stylers": [
                        {
                            "color": "#fdfcf8"
                        }
                        ]
                    },
                    {
                        "featureType": "road.arterial",
                        "elementType": "labels.text",
                        "stylers": [
                        {
                            "visibility": "on"
                        }
                        ]
                    },
                    {
                        "featureType": "road.highway",
                        "elementType": "geometry",
                        "stylers": [
                        {
                            "color": "#f8c967"
                        }
                        ]
                    },
                    {
                        "featureType": "road.highway",
                        "elementType": "geometry.stroke",
                        "stylers": [
                        {
                            "color": "#e9bc62"
                        }
                        ]
                    },
                    {
                        "featureType": "road.highway.controlled_access",
                        "elementType": "geometry",
                        "stylers": [
                        {
                            "color": "#e98d58"
                        }
                        ]
                    },
                    {
                        "featureType": "road.highway.controlled_access",
                        "elementType": "geometry.stroke",
                        "stylers": [
                        {
                            "color": "#db8555"
                        }
                        ]
                    },
                    {
                        "featureType": "road.local",
                        "elementType": "labels.text.fill",
                        "stylers": [
                        {
                            "color": "#806b63"
                        }
                        ]
                    },
                    {
                        "featureType": "transit.line",
                        "elementType": "geometry",
                        "stylers": [
                        {
                            "color": "#dfd2ae"
                        }
                        ]
                    },
                    {
                        "featureType": "transit.line",
                        "elementType": "labels.text.fill",
                        "stylers": [
                        {
                            "color": "#8f7d77"
                        }
                        ]
                    },
                    {
                        "featureType": "transit.line",
                        "elementType": "labels.text.stroke",
                        "stylers": [
                        {
                            "color": "#ebe3cd"
                        }
                        ]
                    },
                    {
                        "featureType": "transit.station",
                        "elementType": "geometry",
                        "stylers": [
                        {
                            "color": "#dfd2ae"
                        }
                        ]
                    },
                    {
                        "featureType": "water",
                        "elementType": "geometry.fill",
                        "stylers": [
                        {
                            "color": "#b9d3c2"
                        }
                        ]
                    },
                    {
                        "featureType": "water",
                        "elementType": "labels.text.fill",
                        "stylers": [
                        {
                            "color": "#92998d"
                        }
                        ]
                    }
                    ],
                { name: "Styled Map" }
            );

            // Start Map
            const map = new google.maps.Map(document.getElementById("map"), {
                center: { lat: 25.750156, lng: -80.279640 },
                zoom: 14,
                mapTypeControlOptions: {
                mapTypeIds: ["roadmap", "satellite", "hybrid", "terrain", "styled_map"],
                },
            });

            //Associate the styled map with the MapTypeId and set it to display.
            map.mapTypes.set("styled_map", styledMapType);
            map.setMapTypeId("styled_map");

            var data = '{{ place|escapejs }}';
            var places = JSON.parse(data)
            console.log(places.length)
            console.log(places[0]["fields"])
            //console.log(data)
            

            for (i=0;i< places.length;i++) {
                //console.log(x.name);
                console.log(places[i]["fields"]["image"])
            

            // MARKER STUFF
            const uluru = { lat: parseFloat(places[i]["fields"]["lat"]), lng: parseFloat(places[i]["fields"]["lon"])};
            const contentString =
                '<div id="content">' +
                '<div id="siteNotice">' +
                "</div>" +
                `<h1 id="firstHeading" class="firstHeading">${places[i]["pk"]}</h1>` +
                '<div id="bodyContent">' +
                `<p><b>Category: </b>${places[i]["fields"]["category"]}</p>` +
                `<p><b>Description: </b> ${places[i]["fields"]["description"]}</p>` +
                `<img src="${places[i]["fields"]["image"]}" style="width:350px;">` +
                `<p><b>Link To website:</b> <a href="${places[i]["fields"]["image"]}">Click Me!</a>` +
                "</p>" +
                "</div>" +
                "</div>";
            const infowindow = new google.maps.InfoWindow({
                content: contentString,
                maxWidth: 400,
                ariaLabel: "Uluru",
            });
            const marker = new google.maps.Marker({
                position: uluru,
                map,
                title: "Uluru (Ayers Rock)",
                icon: {
                    url: "{% static 'shop.png' %}", // url
                    scaledSize: new google.maps.Size(40, 40), // scaled size
                }
            });
            marker.addListener("click", () => {
                infowindow.open({
                anchor: marker,
                map,
                });
            });}

        }

        

        window.initMap = initMap;
    </script>
  </body>
</html>
